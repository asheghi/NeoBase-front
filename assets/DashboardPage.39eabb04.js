import{A as Z,r as T}from"./api.4a23552d.js";import{o as t,c as r,a as o,m as E,p as P,A as O,b as q,d as c,e as d,u as l,t as w,h as _,g as $,n as B,F as I,x as A,B as R,k as v,i as H,T as U}from"./index.3088f20f.js";import{N as h}from"./N-Button.318009ac.js";import{i as z,I as G,a as J,t as K}from"./theme.4f0e6b50.js";const j={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},Q=o("path",{d:"M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"},null,-1),W=[Q];function X(n,s){return t(),r("svg",j,W)}j.width="24";j.height="24";j.viewBox="0 0 24 24";var F={render:X};const k={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},Y=o("path",{d:"M21 19v1H3v-1l2-2v-6c0-3.1 2.03-5.83 5-6.71V4a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.29c2.97.88 5 3.61 5 6.71v6l2 2m-7 2a2 2 0 0 1-2 2 2 2 0 0 1-2-2"},null,-1),ee=[Y];function te(n,s){return t(),r("svg",k,ee)}k.width="24";k.height="24";k.viewBox="0 0 24 24";var L={render:te};const x={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},oe=o("path",{d:"M12 4a4 4 0 0 1 4 4 4 4 0 0 1-4 4 4 4 0 0 1-4-4 4 4 0 0 1 4-4m0 10c4.42 0 8 1.79 8 4v2H4v-2c0-2.21 3.58-4 8-4Z"},null,-1),se=[oe];function ne(n,s){return t(),r("svg",x,se)}x.width="24";x.height="24";x.viewBox="0 0 24 24";var S={render:ne};const b={viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"180",height:"180",class:"application-logo logo"},ae=o("path",{d:"M19.93 4.092c-.038-1.197-1.158-2.269-3.162-3.024C14.935.379 12.521 0 9.965 0 7.41 0 4.995.38 3.166 1.068 1.165 1.822.045 2.89.004 4.085L0 4.85c0 .278.25.714.7 1.071.534.421 1.326.837 2.29 1.2 2.052.776 4.66 1.237 6.975 1.237 2.316 0 4.923-.463 6.975-1.238.965-.364 1.756-.78 2.29-1.2.451-.356.7-.792.7-1.07v-.757Z",fill:"#95CDF9"},null,-1),re=o("path",{d:"M17.6 8.778c-2.229.841-5.057 1.342-7.565 1.342s-5.337-.501-7.566-1.342C1.65 8.468.95 7.964.378 7.565a.21.21 0 0 0-.202-.017.186.186 0 0 0-.078.065.16.16 0 0 0-.028.092v1.332c0 .278.249.627.7.985.534.421 1.325.837 2.29 1.2 2.052.774 4.66 1.236 6.975 1.236 2.315 0 4.923-.462 6.975-1.237.964-.364 1.756-.78 2.29-1.201.45-.356.7-.705.7-.982V7.704a.162.162 0 0 0-.029-.092.186.186 0 0 0-.078-.064.21.21 0 0 0-.201.018c-.573.397-1.273.901-2.091 1.21Z",fill:"#6EBBF7"},null,-1),ce=o("path",{d:"M17.6 12.501c-2.229.84-5.057 1.343-7.565 1.343s-5.337-.502-7.566-1.343C1.65 12.191.95 11.687.378 11.29a.21.21 0 0 0-.202-.018.186.186 0 0 0-.078.065.161.161 0 0 0-.028.092v1.29c0 .277.249.626.7.983.533.422 1.325.837 2.29 1.201 2.052.774 4.659 1.236 6.975 1.236s4.923-.462 6.975-1.237c.964-.364 1.756-.779 2.29-1.2.45-.358.7-.707.7-.983v-1.29a.162.162 0 0 0-.029-.092.186.186 0 0 0-.078-.064.209.209 0 0 0-.201.018c-.573.397-1.273.9-2.091 1.211Z",fill:"#48A8F5"},null,-1),ie=o("path",{d:"M17.531 16.363c-2.23.84-5.058 1.342-7.566 1.342S4.63 17.203 2.4 16.363c-.818-.31-1.518-.814-2.09-1.212a.21.21 0 0 0-.202-.018.186.186 0 0 0-.079.064.161.161 0 0 0-.028.092v1.29c0 .278.25.627.7.984.534.422 1.326.837 2.29 1.2C5.042 19.539 7.65 20 9.965 20c2.316 0 4.923-.462 6.975-1.237.965-.364 1.756-.78 2.29-1.201.451-.357.7-.707.7-.983v-1.29a.161.161 0 0 0-.029-.091.186.186 0 0 0-.077-.064.209.209 0 0 0-.202.018c-.572.397-1.273.9-2.091 1.211Z",fill:"#48A8F5"},null,-1),le=[ae,re,ce,ie];function de(n,s){return t(),r("svg",b,le)}b.width="24";b.height="24";var V={render:de};const C={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},he=o("path",{d:"M12 3C7.58 3 4 4.79 4 7s3.58 4 8 4 8-1.79 8-4-3.58-4-8-4M4 9v3c0 2.21 3.58 4 8 4s8-1.79 8-4V9c0 2.21-3.58 4-8 4s-8-1.79-8-4m0 5v3c0 2.21 3.58 4 8 4s8-1.79 8-4v-3c0 2.21-3.58 4-8 4s-8-1.79-8-4Z"},null,-1),ue=[he];function pe(n,s){return t(),r("svg",C,ue)}C.width="24";C.height="24";C.viewBox="0 0 24 24";var _e={render:pe};const M={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},ve=o("path",{d:"M12 5.5A3.5 3.5 0 0 1 15.5 9a3.5 3.5 0 0 1-3.5 3.5A3.5 3.5 0 0 1 8.5 9 3.5 3.5 0 0 1 12 5.5M5 8c.56 0 1.08.15 1.53.42-.15 1.43.27 2.85 1.13 3.96C7.16 13.34 6.16 14 5 14a3 3 0 0 1-3-3 3 3 0 0 1 3-3m14 0a3 3 0 0 1 3 3 3 3 0 0 1-3 3c-1.16 0-2.16-.66-2.66-1.62a5.536 5.536 0 0 0 1.13-3.96c.45-.27.97-.42 1.53-.42M5.5 18.25c0-2.07 2.91-3.75 6.5-3.75s6.5 1.68 6.5 3.75V20h-13v-1.75M0 20v-1.5c0-1.39 1.89-2.56 4.45-2.9-.59.68-.95 1.62-.95 2.65V20H0m24 0h-3.5v-1.75c0-1.03-.36-1.97-.95-2.65 2.56.34 4.45 1.51 4.45 2.9V20Z"},null,-1),me=[ve];function ge(n,s){return t(),r("svg",M,me)}M.width="24";M.height="24";M.viewBox="0 0 24 24";var we={render:ge};const y={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},fe=o("path",{d:"M6 8c0-2.21 1.79-4 4-4s4 1.79 4 4-1.79 4-4 4-4-1.79-4-4m6 10.2c0-.96.5-1.86 1.2-2.46v-.24c0-.39.07-.76.18-1.12-1.03-.24-2.17-.38-3.38-.38-4.42 0-8 1.79-8 4v2h10v-1.8m10 .1v3.5c0 .6-.6 1.2-1.3 1.2h-5.5c-.6 0-1.2-.6-1.2-1.3v-3.5c0-.6.6-1.2 1.2-1.2v-1.5c0-1.4 1.4-2.5 2.8-2.5s2.8 1.1 2.8 2.5V17c.6 0 1.2.6 1.2 1.3m-2.5-2.8c0-.8-.7-1.3-1.5-1.3s-1.5.5-1.5 1.3V17h3v-1.5Z"},null,-1),$e=[fe];function je(n,s){return t(),r("svg",y,$e)}y.width="24";y.height="24";y.viewBox="0 0 24 24";var ke={render:je};const D={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},xe=o("path",{d:"m16.5 9-3 3 3 3H22V9M9 16.5V22h6v-5.5l-3-3M7.5 9H2v6h5.5l3-3M15 7.5V2H9v5.5l3 3 3-3Z"},null,-1),Ce=[xe];function Me(n,s){return t(),r("svg",D,Ce)}D.width="24";D.height="24";D.viewBox="0 0 24 24";var ye={render:Me};const f=E(),p=P(()=>f&&f.params&&f.params.collection?f.params.collection:null),De=P(()=>[{label:"Database",icon:_e,to:(()=>p.value?{name:"documents",params:{collection:p.value}}:{name:"collections"})()},{label:"Users",icon:we,to:{name:"auth"}},{label:"Access Control",icon:ke,to:(()=>p.value?{name:"access-config",params:{collection:p.value}}:{name:"access"})()},{label:"Playground",icon:ye,to:(()=>p.value?{name:"collection-playground",params:{collection:p.value}}:{name:"playground"})()}]),m=O({fetching:!1,data:null});function Be(n){return(!m.data||n)&&(m.fetching=!0,Z.Projects.list().then(s=>{m.data=s.data}).finally(()=>{m.fetching=!1})),m}const Ve={class:"DashNavBar"},be={class:"hidden lg:flex"},Ne=$(" NeoBase "),Ie={class:"lg:hidden"},Ae=["textContent"],He=o("span",{class:"ml-auto"},null,-1),Ze={class:"flex lg:hidden mb-6"},Pe=$(" NeoBase "),qe={key:0,class:"links"},Fe=["textContent"],Le={name:"DashNavBar",components:{NButton:h,IconMenu:F,IconNotifications:L,IconAccount:S,IconLogo:V},data(){return{expanded:!1,projectsDropped:!1}},computed:{title(){return this.$route.name},project(){return this.$route.params.project}},methods:{onProjectSelected(n){var s;this.projectsDropped=!this.projectsDropped,this.$router.push({name:this.$route.name,params:{...((s=this.$route)==null?void 0:s.params)||{},project:n},query:this.$route.query})}}},Se=Object.assign(Le,{setup(n){const s=Be();return(e,a)=>{const N=q("router-link");return t(),r("nav",Ve,[o("div",be,[c(h,{class:"gap-2 px-0 mr-4",onClick:a[0]||(a[0]=i=>e.$router.push({name:"projects"}))},{default:d(()=>[c(l(V)),Ne]),_:1})]),o("div",Ie,[c(h,{class:"square",onClick:a[1]||(a[1]=i=>e.expanded=!e.expanded)},{default:d(()=>[c(l(F))]),_:1})]),o("div",{class:"title",textContent:w(e.title)},null,8,Ae),He,e.$route.name!=="projects"?(t(),_(h,{key:0,class:"projects",onClick:a[2]||(a[2]=i=>e.projectsDropped=!e.projectsDropped)},{default:d(()=>{var i,g;return[$(w((i=e.$route.params)==null?void 0:i.project)+" ",1),e.project.fetching?v("",!0):(t(),r("div",{key:0,class:B([{block:e.projectsDropped,hidden:!e.projectsDropped},"drop-down"])},[(t(!0),r(I,null,A((g=l(s).data)==null?void 0:g.filter(u=>u.name!==e.$route.params.project),u=>(t(),_(h,{key:u._id,class:"item",onClick:R(Oe=>e.onProjectSelected(u.name),["prevent","stop"])},{default:d(()=>[$(w(u.name),1)]),_:2},1032,["onClick"]))),128))],2))]}),_:1})):v("",!0),c(h,{class:"square",onClick:l(K)},{default:d(()=>[(t(),_(H(l(z)?l(G):l(J)),{class:"toggle",width:"28",height:"28"}))]),_:1},8,["onClick"]),c(h,{class:"square"},{default:d(()=>[c(l(L))]),_:1}),c(h,{class:"square"},{default:d(()=>[c(l(S))]),_:1}),o("div",{class:B(["nav-drawer",{expanded:e.expanded,"hide-nav":!e.project}])},[o("div",Ze,[c(h,{class:"gap-2 px-0"},{default:d(()=>[c(l(V)),Pe]),_:1})]),e.project?(t(),r("div",qe,[(t(!0),r(I,null,A(l(De),(i,g)=>(t(),_(N,{key:g,class:"item",to:i.to,onClick:a[3]||(a[3]=u=>e.expanded=!1)},{default:d(()=>[i.icon?(t(),_(H(i.icon),{key:0,class:"icon"})):v("",!0),o("div",{class:"label",textContent:w(i.label)},null,8,Fe)]),_:2},1032,["to"]))),128))])):v("",!0)],2),c(U,{name:"fade"},{default:d(()=>[e.expanded?(t(),r("div",{key:0,class:"nav-drawer-shadow lg:hidden",onClick:a[4]||(a[4]=i=>e.expanded=!1)})):v("",!0)]),_:1})])}}});const Te={class:"DashboardPage"},Ee={async beforeRouteEnter(n,s,e){try{const{data:a,status:N}=await Z.me()}catch(a){return console.error(a),e("/login")}e()},computed:{project(){return this.$route.params.project},showHome(){return this.$route.name}},methods:{logout(){T(),this.$router.replace("/login")}}},Je=Object.assign(Ee,{__name:"DashboardPage",setup(n){return(s,e)=>{const a=q("router-view");return t(),r("div",Te,[c(Se),o("div",{class:B(["dash-content-wrapper",{"hide-nav":!s.project}])},[c(a,{class:"dash-content"})],2)])}}});export{Je as default};
